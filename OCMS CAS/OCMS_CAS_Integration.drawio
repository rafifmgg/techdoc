<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0" pages="5">
  <diagram id="section-2" name="2_High_Level_All_APIs">
    <mxGraphModel dx="744" dy="516" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" value="&lt;b&gt;CAS-OCMS-PLUS Integration: High-Level Architecture&lt;/b&gt;&lt;br&gt;All 4 APIs showing system interactions and data flow" vertex="1">
          <mxGeometry height="60" width="800" x="40" y="20" as="geometry" />
        </mxCell>
        <mxCell id="api1-title" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=12;" value="&lt;b&gt;API 1: Get Payment Status (Daily)&lt;/b&gt;" vertex="1">
          <mxGeometry height="40" width="300" x="40" y="100" as="geometry" />
        </mxCell>
        <mxCell id="api1-cas" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" value="CAS&lt;br&gt;Cron Job" vertex="1">
          <mxGeometry height="60" width="100" x="40" y="160" as="geometry" />
        </mxCell>
        <mxCell id="api1-ocms" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="OCMS&lt;br&gt;Query &amp; Return" vertex="1">
          <mxGeometry height="60" width="100" x="310" y="160" as="geometry" />
        </mxCell>
        <mxCell id="api2-title" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=12;" value="&lt;b&gt;API 2: Update Court Notices (Daily)&lt;/b&gt;" vertex="1">
          <mxGeometry height="40" width="300" x="40" y="260" as="geometry" />
        </mxCell>
        <mxCell id="api2-cas" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" value="CAS&lt;br&gt;Court Update" vertex="1">
          <mxGeometry height="60" width="100" x="40" y="320" as="geometry" />
        </mxCell>
        <mxCell id="api2-ocms" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="OCMS&lt;br&gt;Update &amp; Log" vertex="1">
          <mxGeometry height="60" width="100" x="310" y="322.5" as="geometry" />
        </mxCell>
        <mxCell id="api2-db" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" value="DB&lt;br&gt;UPDATE notice" vertex="1">
          <mxGeometry height="60" width="80" x="320" y="430" as="geometry" />
        </mxCell>
        <mxCell id="api3-title" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=12;" value="&lt;b&gt;API 3: Refresh VIP Vehicle (Daily)&lt;/b&gt;" vertex="1">
          <mxGeometry height="40" width="350" x="500" y="100" as="geometry" />
        </mxCell>
        <mxCell id="api3-ocms" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="OCMS&lt;br&gt;Scheduled Job" vertex="1">
          <mxGeometry height="60" width="100" x="500" y="160" as="geometry" />
        </mxCell>
        <mxCell id="api3-cas" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" value="CAS&lt;br&gt;VIP Data" vertex="1">
          <mxGeometry height="60" width="100" x="770" y="160" as="geometry" />
        </mxCell>
        <mxCell id="api4-title" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=12;" value="&lt;b&gt;API 4: Query Notice Info (Adhoc/Real-time)&lt;/b&gt;" vertex="1">
          <mxGeometry height="40" width="350" x="500" y="260" as="geometry" />
        </mxCell>
        <mxCell id="api4-plus" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" value="PLUS&lt;br&gt;User Query" vertex="1">
          <mxGeometry height="60" width="100" x="500" y="320" as="geometry" />
        </mxCell>
        <mxCell id="api4-iz" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" value="IZ-APIM&lt;br&gt;Gateway" vertex="1">
          <mxGeometry height="60" width="80" x="770" y="320" as="geometry" />
        </mxCell>
        <mxCell id="api4-ocms" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="OCMS&lt;br&gt;Query &amp;amp; Update" vertex="1">
          <mxGeometry height="60" width="80" x="770" y="425" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" value="&lt;b&gt;Legend&lt;/b&gt;" vertex="1">
          <mxGeometry height="30" width="100" x="1000" y="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-cas" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" value="CAS System" vertex="1">
          <mxGeometry height="30" width="100" x="1000" y="140" as="geometry" />
        </mxCell>
        <mxCell id="legend-ocms" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" value="OCMS Backend" vertex="1">
          <mxGeometry height="30" width="100" x="1120" y="140" as="geometry" />
        </mxCell>
        <mxCell id="legend-plus" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" value="PLUS System" vertex="1">
          <mxGeometry height="30" width="100" x="1000" y="180" as="geometry" />
        </mxCell>
        <mxCell id="legend-iz" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" value="IZ-APIM" vertex="1">
          <mxGeometry height="30" width="100" x="1120" y="180" as="geometry" />
        </mxCell>
        <mxCell id="notes-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" value="&lt;b&gt;Key Integration Points&lt;/b&gt;" vertex="1">
          <mxGeometry height="30" width="200" x="1000" y="240" as="geometry" />
        </mxCell>
        <mxCell id="note1" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" value="• API 1 &amp; 2: CAS to OCMS (daily)" vertex="1">
          <mxGeometry height="25" width="300" x="1000" y="280" as="geometry" />
        </mxCell>
        <mxCell id="note2" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" value="• API 3: OCMS to CAS (daily batch)" vertex="1">
          <mxGeometry height="25" width="300" x="1000" y="310" as="geometry" />
        </mxCell>
        <mxCell id="note3" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" value="• API 4: PLUS to OCMS (adhoc/real-time)" vertex="1">
          <mxGeometry height="25" width="300" x="1000" y="340" as="geometry" />
        </mxCell>
        <mxCell id="note4" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" value="• All use POST method" vertex="1">
          <mxGeometry height="25" width="300" x="1000" y="370" as="geometry" />
        </mxCell>
        <mxCell id="note5" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#CC0000;" value="• Batch Limit: Max 500 notices/request" vertex="1">
          <mxGeometry height="25" width="300" x="1000" y="400" as="geometry" />
        </mxCell>
        <mxCell id="note6" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" value="• 2 new tables: ocms_vip_vehicle, ocms_court_case" vertex="1">
          <mxGeometry height="25" width="350" x="1000" y="430" as="geometry" />
        </mxCell>
        <mxCell id="note7" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#CC0000;" value="• EMCON: Handled manually (not in API)" vertex="1">
          <mxGeometry height="25" width="350" x="1000" y="460" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" parent="1" source="api1-cas" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;fontSize=8;" target="api1-ocms" value="POST /v1/ocms/casGetPaymentStatus">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="api2-cas" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;fontSize=8;" target="api2-ocms" value="POST /v1/ocms/casUpdateCourtNotices">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4" edge="1" parent="1" source="api2-ocms" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;dashed=1;fontSize=9;" target="api2-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5" edge="1" parent="1" source="api3-ocms" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;fontSize=8;" target="api3-cas" value="POST /v1/cas/VipVehicle">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" edge="1" parent="1" source="api4-plus" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;fontSize=8;" target="api4-iz" value="POST /v1/ocms/plusPaymentActivation">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e8" edge="1" parent="1" source="api4-iz" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;fontSize=9;" target="api4-ocms">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="section-3-1" name="3.1_API1_Detailed">
    <mxGraphModel dx="928" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="&lt;b&gt;API 1: Get Payment Status (Detailed)&lt;/b&gt;&lt;br&gt;Query only - No DB write (EMCON handled manually)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="600" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-sl" value="CAS System" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="40" y="80" width="2400" height="280" as="geometry" />
        </mxCell>
        <mxCell id="cas-start" value="Start" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="cas-sl" vertex="1">
          <mxGeometry x="40" y="60" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-prepare" value="CAS prepares unpaid notice list" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="cas-sl" vertex="1">
          <mxGeometry x="180" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-api-call" value="Call OCMS API" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="cas-sl" vertex="1">
          <mxGeometry x="340" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="api-detail" value="POST /v1/ocms/casGetPaymentStatus&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;noticeNumbers&quot;: [&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;500400058A&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;500400059B&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;]&lt;br&gt;}" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" parent="cas-sl" vertex="1">
          <mxGeometry x="540" y="50" width="260" height="130" as="geometry" />
        </mxCell>
        <mxCell id="cas-receive" value="Receive Response" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="cas-sl" vertex="1">
          <mxGeometry x="2100" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-end" value="End" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="cas-sl" vertex="1">
          <mxGeometry x="2260" y="60" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="cas-sl" source="cas-start" target="cas-prepare" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="cas-sl" source="cas-prepare" target="cas-api-call" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="cas-sl" source="cas-api-call" target="api-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-recv" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="cas-sl" source="cas-receive" target="cas-end" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ocms-sl" value="OCMS Backend" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="40" y="380" width="2400" height="400" as="geometry" />
        </mxCell>
        <mxCell id="ocms-auth" value="Check API Key" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="340" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="auth-check" value="valid ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="500" y="50" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ocms-valid" value="Validate Request Schema" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="900" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="valid-check" value="valid ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1060" y="50" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ocms-batch" value="Check Batch Limit" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1180" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="batch-detail" value="Max 500 notices per request" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;rounded=0;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1155" y="160" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="batch-check" value="OK ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1340" y="50" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="db-query" value="Query Notice Data from DB" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1460" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="db-detail" value="SELECT notice_no, suspension_type, crs_reason_of_suspension,&lt;br&gt;epr_reason_of_suspension, payment_status, amount_payable,&lt;br&gt;amount_paid, payment_acceptance_allowed&lt;br&gt;FROM ocms_valid_offence_notice&lt;br&gt;WHERE notice_no IN (:noticeNumbers)" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1395" y="160" width="250" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ocms-exist" value="Notice exists ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1620" y="50" width="100" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ocms-build" value="Build Response (Map all fields)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1760" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-return" value="Return 200 OK" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1920" y="60" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="response-detail" value="Response 200 OK:&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;notices&quot;: [{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;noticeNo&quot;: &quot;500400058A&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;suspensionType&quot;: &quot;TS&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;crsReasonOfSuspension&quot;: &quot;APP&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;eprReasonOfSuspension&quot;: null,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;paymentStatus&quot;: &quot;null&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;amountPayable&quot;: 300.00,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;amountPaid&quot;: 0.00,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;paymentAcceptanceAllowed&quot;: &quot;Y&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;}]&lt;br&gt;}" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1830" y="160" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="err-401" value="Return Unauthorized&lt;br&gt;(OCMS-4001)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" parent="ocms-sl" vertex="1">
          <mxGeometry x="470" y="300" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="err-400" value="Return Bad Request&lt;br&gt;(OCMS-4000)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1030" y="300" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="err-413" value="Return Payload Too Large&lt;br&gt;(OCMS-4013)" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1310" y="300" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="err-404" value="Return empty" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1600" y="300" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-auth" target="auth-check" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="auth-check" target="ocms-valid" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5b" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="auth-check" target="err-401" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-valid" target="valid-check" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="valid-check" target="ocms-batch" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9b" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="valid-check" target="err-400" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9c" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="ocms-sl" source="ocms-batch" target="batch-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-batch" target="batch-check" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="batch-check" target="db-query" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11b" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="batch-check" target="err-413" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11c" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="ocms-sl" source="db-query" target="db-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="db-query" target="ocms-exist" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-exist" target="ocms-build" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13b" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-exist" target="err-404" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-build" target="ocms-return" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="ocms-sl" source="ocms-return" target="response-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="1" source="cas-api-call" target="ocms-auth" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="1" source="ocms-return" target="cas-receive" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="section-3-2" name="3.2_API2_Detailed">
    <mxGraphModel dx="1737" dy="1203" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2800" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" value="&lt;b&gt;API 2: Update Court Notices (Detailed)&lt;/b&gt;&lt;br&gt;Update court notices only (dayend = &#39;Y&#39;)" vertex="1">
          <mxGeometry height="60" width="600" x="40" y="20" as="geometry" />
        </mxCell>
        <mxCell id="cas-sl" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" value="CAS System" vertex="1">
          <mxGeometry height="280" width="2790" x="40" y="80" as="geometry" />
        </mxCell>
        <mxCell id="cas-start" parent="cas-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" value="Start" vertex="1">
          <mxGeometry height="60" width="100" x="40" y="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-prepare" parent="cas-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="CAS prepares court notice data" vertex="1">
          <mxGeometry height="60" width="120" x="180" y="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-api-call" parent="cas-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Call OCMS API" vertex="1">
          <mxGeometry height="60" width="120" x="340" y="60" as="geometry" />
        </mxCell>
        <mxCell id="api-detail" parent="cas-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="POST /v1/ocms/casUpdateCourtNotices&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;notices&quot;: [{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;noticeNo&quot;: &quot;500400058A&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;suspensionType&quot;: &quot;TS&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;lastProcessingStage&quot;: &quot;CSD&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;prevProcessingStage&quot;: &quot;CPC&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;nextProcessingStage&quot;: &quot;CSR&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;lastProcessingDate&quot;: &quot;2024-01-15&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;prevProcessingDate&quot;: &quot;2024-01-10&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;nextProcessingDate&quot;: &quot;2024-01-20&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;atomsFlag&quot;: &quot;Y&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;amountPayable&quot;: 300.00,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;paymentAcceptanceAllowed&quot;: &quot;Y&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;eprReasonOfSuspension&quot;: &quot;APP&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;eprDateOfSuspension&quot;: &quot;2024-01-15&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;}]&lt;br&gt;}" vertex="1">
          <mxGeometry height="280" width="300" x="530" y="30" as="geometry" />
        </mxCell>
        <mxCell id="cas-receive" parent="cas-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Receive Response" vertex="1">
          <mxGeometry height="60" width="120" x="2400" y="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-end" parent="cas-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" value="End" vertex="1">
          <mxGeometry height="60" width="100" x="2560" y="60" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" parent="cas-sl" source="cas-start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="cas-prepare">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" edge="1" parent="cas-sl" source="cas-prepare" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="cas-api-call">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2b" edge="1" parent="cas-sl" source="cas-api-call" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="api-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e-recv" edge="1" parent="cas-sl" source="cas-receive" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="cas-end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ocms-sl" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" value="OCMS Backend" vertex="1">
          <mxGeometry height="450" width="2790" x="40" y="380" as="geometry" />
        </mxCell>
        <mxCell id="ocms-auth" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Check API Key" vertex="1">
          <mxGeometry height="60" width="120" x="340" y="60" as="geometry" />
        </mxCell>
        <mxCell id="auth-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="valid ?" vertex="1">
          <mxGeometry height="80" width="80" x="500" y="50" as="geometry" />
        </mxCell>
        <mxCell id="ocms-valid" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Validate Request Schema" vertex="1">
          <mxGeometry height="60" width="120" x="750" y="60" as="geometry" />
        </mxCell>
        <mxCell id="valid-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="valid ?" vertex="1">
          <mxGeometry height="80" width="80" x="1060" y="50" as="geometry" />
        </mxCell>
        <mxCell id="ocms-batch" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Check Batch Limit" vertex="1">
          <mxGeometry height="60" width="120" x="1180" y="60" as="geometry" />
        </mxCell>
        <mxCell id="batch-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;rounded=0;" value="Max 500 notices per request" vertex="1">
          <mxGeometry height="40" width="170" x="1155" y="160" as="geometry" />
        </mxCell>
        <mxCell id="batch-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="OK ?" vertex="1">
          <mxGeometry height="80" width="80" x="1340" y="50" as="geometry" />
        </mxCell>
        <mxCell id="db-query" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Query Notice from DB" vertex="1">
          <mxGeometry height="60" width="120" x="1460" y="60" as="geometry" />
        </mxCell>
        <mxCell id="db-select-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="SELECT notice_no, last_processing_stage&lt;br&gt;FROM ocms_valid_offence_notice&lt;br&gt;WHERE notice_no = :noticeNo" vertex="1">
          <mxGeometry height="70" width="240" x="1400" y="160" as="geometry" />
        </mxCell>
        <mxCell id="ocms-exist" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="Notice exists ?" vertex="1">
          <mxGeometry height="80" width="100" x="1620" y="50" as="geometry" />
        </mxCell>
        <mxCell id="court-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="last_processing_stage&lt;div&gt;!=&lt;/div&gt;&lt;div&gt;NPA,ROV,ENA,&lt;/div&gt;&lt;div&gt;RD1,RD2,&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;RR3&lt;/span&gt;&lt;/div&gt;&lt;div&gt;DN1,DN2,DR3&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="100" x="1760" y="50" as="geometry" />
        </mxCell>
        <mxCell id="db-update" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Update Notice in DB" vertex="1">
          <mxGeometry height="60" width="120" x="1900" y="60" as="geometry" />
        </mxCell>
        <mxCell id="db-update-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="UPDATE ocms_valid_offence_notice&lt;br&gt;SET last_processing_stage = :lastProcessingStage,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prev_processing_stage = :prevProcessingStage,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;next_processing_stage = :nextProcessingStage,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;last_processing_date = :lastProcessingDate,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prev_processing_date = :prevProcessingDate,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;next_processing_date = :nextProcessingDate,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;atoms_flag = :atomsFlag,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amount_payable = :amountPayable,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;payment_acceptance_allowed = :paymentAllowance,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;epr_reason_of_suspension = :eprReason,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;epr_date_of_suspension = :eprDate,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;suspension_type = :suspensionType&lt;br&gt;WHERE notice_no = :noticeNo" vertex="1">
          <mxGeometry height="220" width="310" x="1900" y="170" as="geometry" />
        </mxCell>
        <mxCell id="ocms-log" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Log to App Log" vertex="1">
          <mxGeometry height="60" width="120" x="2060" y="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-build" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Build Response" vertex="1">
          <mxGeometry height="60" width="120" x="2220" y="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-return" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Return 200 OK" vertex="1">
          <mxGeometry height="60" width="100" x="2380" y="60" as="geometry" />
        </mxCell>
        <mxCell id="err-401" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Unauthorized&lt;br&gt;(OCMS-4001)" vertex="1">
          <mxGeometry height="60" width="140" x="470" y="340" as="geometry" />
        </mxCell>
        <mxCell id="err-400" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Bad Request&lt;br&gt;(OCMS-4000)" vertex="1">
          <mxGeometry height="60" width="140" x="1030" y="340" as="geometry" />
        </mxCell>
        <mxCell id="err-413" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Payload Too Large&lt;br&gt;(OCMS-4013)" vertex="1">
          <mxGeometry height="60" width="140" x="1310" y="340" as="geometry" />
        </mxCell>
        <mxCell id="err-404" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return empty" vertex="1">
          <mxGeometry height="60" width="140" x="1600" y="340" as="geometry" />
        </mxCell>
        <mxCell id="err-400-court" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Not Court Notice&lt;br&gt;(OCMS-4009)" vertex="1">
          <mxGeometry height="60" width="140" x="1741" y="340" as="geometry" />
        </mxCell>
        <mxCell id="e4" edge="1" parent="ocms-sl" source="ocms-auth" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="auth-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5" edge="1" parent="ocms-sl" source="auth-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-valid" value="yes">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e5b" edge="1" parent="ocms-sl" source="auth-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-401" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e8" edge="1" parent="ocms-sl" source="ocms-valid" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="valid-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9" edge="1" parent="ocms-sl" source="valid-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-batch" value="yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9b" edge="1" parent="ocms-sl" source="valid-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-400" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9c" edge="1" parent="ocms-sl" source="ocms-batch" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="batch-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e10" edge="1" parent="ocms-sl" source="ocms-batch" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="batch-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11" edge="1" parent="ocms-sl" source="batch-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="db-query" value="yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11b" edge="1" parent="ocms-sl" source="batch-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-413" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11c" edge="1" parent="ocms-sl" source="db-query" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="db-select-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e12" edge="1" parent="ocms-sl" source="db-query" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-exist">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13" edge="1" parent="ocms-sl" source="ocms-exist" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="court-check" value="yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13b" edge="1" parent="ocms-sl" source="ocms-exist" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-404" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14" edge="1" parent="ocms-sl" source="court-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="db-update" value="yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14b" edge="1" parent="ocms-sl" source="court-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-400-court" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14c" edge="1" parent="ocms-sl" source="db-update" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="db-update-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e15" edge="1" parent="ocms-sl" source="db-update" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-log">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e16" edge="1" parent="ocms-sl" source="ocms-log" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-build">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e17" edge="1" parent="ocms-sl" source="ocms-build" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-return">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="xbsfMAeGroaGnqQayazO-1" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="UPDATE eocms_valid_offence_notice&lt;br&gt;SET last_processing_stage = :lastProcessingStage,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;next_processing_stage = :nextProcessingStage,&lt;br&gt;&amp;nbsp; &amp;nbsp; atoms_flag = :atomsFlag,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;amount_payable = :amountPayable,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;payment_acceptance_allowed = :paymentAllowance,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;epr_reason_of_suspension = :eprReason,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;epr_date_of_suspension = :eprDate,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;suspension_type = :suspensionType&lt;br&gt;WHERE notice_no = :noticeNo" vertex="1">
          <mxGeometry height="220" width="310" x="2220" y="170" as="geometry" />
        </mxCell>
        <mxCell id="xbsfMAeGroaGnqQayazO-3" edge="1" parent="ocms-sl" source="db-update" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="xbsfMAeGroaGnqQayazO-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2370" y="160" as="sourcePoint" />
            <mxPoint x="2370" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="cas-api-call" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-auth">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e18" edge="1" parent="1" source="ocms-return" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="cas-receive">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="response-detail" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="Response 200 OK:&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;updatedCount&quot;: 2,&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;failedCount&quot;: 0,&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;notices&quot;: [{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;noticeNo&quot;: &quot;500400058A&quot;,&lt;br&gt;&lt;font style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;appCode&quot;: &quot;OCMS-2000&quot;&lt;br style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(63, 63, 63);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;status&quot;: &quot;OK&quot;&lt;/span&gt;&lt;div&gt;&amp;nbsp; }, {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;noticeNo&quot;: &quot;500400059B&quot;,&lt;br&gt;&lt;font style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;appCode&quot;: &quot;OCMS-2000&quot;&lt;br style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(63, 63, 63);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;status&quot;: &quot;OK&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; }]&lt;br&gt;}&lt;/div&gt;" vertex="1">
          <mxGeometry height="200" width="240" x="2570" y="370" as="geometry" />
        </mxCell>
        <mxCell id="e17b" edge="1" parent="1" source="ocms-return" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="response-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="section-3-3" name="3.3_API3_Detailed">
    <mxGraphModel dx="663" dy="596" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="e6c" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="1" source="cas-return" target="ocms-receive" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="title" value="&lt;b&gt;API 3: Refresh VIP Vehicle Data (Detailed)&lt;/b&gt;&lt;br&gt;Daily batch job - TRUNCATE + INSERT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="600" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-sl" value="OCMS Cron" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="40" y="80" width="2140" height="350" as="geometry" />
        </mxCell>
        <mxCell id="ocms-start" value="Start" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="40" y="60" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-record-start" value="Record Start Time" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="180" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-prepare" value="Prepare Request" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="340" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-api-call" value="Call CAS API&lt;div&gt;using APIM&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="500" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="api-detail" value="POST /v1/cas/VipVehicle (TBD)" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" parent="ocms-sl" vertex="1">
          <mxGeometry x="660" y="60" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-receive" value="Receive VIP Data" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="960" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="response-check" value="Success ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1120" y="50" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="retry-check" value="Retry &lt; 3 ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1120" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ocms-wait" value="retry" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="ocms-sl" vertex="1">
          <mxGeometry x="840" y="210" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="err-email" value="Send Email Alert to Operations" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1280" y="280" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-start" target="ocms-record-start" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-record-start" target="ocms-prepare" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-prepare" target="ocms-api-call" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="ocms-sl" source="ocms-api-call" target="api-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-receive" target="response-check" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="response-check" target="retry-check" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e11" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="retry-check" target="err-email" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;dashed=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="ocms-sl" source="ocms-wait" target="ocms-api-call" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e10" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;jumpStyle=arc;" parent="ocms-sl" source="retry-check" target="ocms-wait" edge="1">
          <mxGeometry x="-0.5556" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="db-insert" value="Insert VIP Vehicle records" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1525" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="db-insert-detail" value="INSERT INTO ocms_vip_vehicle&lt;br&gt;(vehicle_no, description, status,&lt;br&gt;&amp;nbsp;cre_date, cre_user_id)&lt;br&gt;VALUES (:vehicleNo, :description,&lt;br&gt;&amp;nbsp;:status, GETDATE(), &#39;ocmsiz_app_conn&#39;)" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1460" y="170" width="250" height="100" as="geometry" />
        </mxCell>
        <mxCell id="insert-check" value="Success ?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1745" y="50" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ocms-log" value="Log Completion" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1865" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-end" value="End" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="ocms-sl" vertex="1">
          <mxGeometry x="2025" y="60" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e13b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="ocms-sl" source="db-insert" target="db-insert-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="db-insert" target="insert-check" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e15" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="insert-check" target="ocms-log" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e15b" value="no" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="insert-check" target="err-500" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="ocms-sl" source="ocms-log" target="ocms-end" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="err-500" value="log error to application log" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" parent="ocms-sl" vertex="1">
          <mxGeometry x="1715" y="280" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e8" value="yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="ocms-sl" source="response-check" target="_q83J_mTeMBisgLzm3sT-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1240" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_q83J_mTeMBisgLzm3sT-2" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="ocms-sl" source="_q83J_mTeMBisgLzm3sT-1" target="db-insert">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="_q83J_mTeMBisgLzm3sT-1" value="truncate VIP vehicle table" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" vertex="1" parent="ocms-sl">
          <mxGeometry x="1260" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-sl" value="CAS System" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="40" y="450" width="2100" height="380" as="geometry" />
        </mxCell>
        <mxCell id="cas-validate" value="CAS validates APIM" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="cas-sl" vertex="1">
          <mxGeometry x="490" y="60" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-query" value="CAS queries VIP vehicles" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="cas-sl" vertex="1">
          <mxGeometry x="680" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cas-return" value="CAS returns vehicle list" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="cas-sl" vertex="1">
          <mxGeometry x="840" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="response-detail" value="Response 200 OK: (TBD)&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;data&quot;: [{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;vehicleNo&quot;: &quot;ABC1234&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;description&quot;: &quot;VIP Vehicle&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;status&quot;: &quot;A&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;}],&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;totalCount&quot;: 150&lt;br&gt;}" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" parent="cas-sl" vertex="1">
          <mxGeometry x="780" y="160" width="240" height="180" as="geometry" />
        </mxCell>
        <mxCell id="e5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="cas-sl" source="cas-validate" target="cas-query" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="cas-sl" source="cas-query" target="cas-return" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e6b" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="cas-sl" source="cas-return" target="response-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" parent="1" source="ocms-api-call" target="cas-validate" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="section-3-4" name="3.4_API4_Detailed">
    <mxGraphModel dx="1489" dy="1031" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3000" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" value="&lt;b&gt;API 4: Update Payment Activation (Detailed)&lt;/b&gt;&lt;br&gt;PLUS adhoc query - Payment allowance" vertex="1">
          <mxGeometry height="60" width="600" x="40" y="20" as="geometry" />
        </mxCell>
        <mxCell id="plus-sl" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" value="PLUS System (via IZ-APIM)" vertex="1">
          <mxGeometry height="320" width="2800" x="40" y="80" as="geometry" />
        </mxCell>
        <mxCell id="plus-start" parent="plus-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" value="Start" vertex="1">
          <mxGeometry height="60" width="100" x="40" y="60" as="geometry" />
        </mxCell>
        <mxCell id="plus-prepare" parent="plus-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="PLUS prepares notice list" vertex="1">
          <mxGeometry height="60" width="120" x="180" y="60" as="geometry" />
        </mxCell>
        <mxCell id="plus-api-call" parent="plus-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Call IZ-APIM Gateway" vertex="1">
          <mxGeometry height="60" width="120" x="340" y="60" as="geometry" />
        </mxCell>
        <mxCell id="api-detail" parent="plus-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="POST /v1/&lt;span style=&quot;line-height: 115%; font-family: Arial, sans-serif;&quot; lang=&quot;EN-US&quot;&gt;&lt;font&gt;plusPaymentActivation&lt;/font&gt;&lt;/span&gt;&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;noticeNumbers&quot;: [&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;500400058A&quot;,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;500400059B&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;],&lt;br&gt;&amp;nbsp;&amp;nbsp;&quot;paymentDueDate&quot;: &quot;2024-01-15&quot;&lt;br&gt;}" vertex="1">
          <mxGeometry height="150" width="280" x="260" y="160" as="geometry" />
        </mxCell>
        <mxCell id="iz-auth" parent="plus-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="IZ-APIM validate" vertex="1">
          <mxGeometry height="60" width="140" x="500" y="60" as="geometry" />
        </mxCell>
        <mxCell id="iz-route" parent="plus-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Route to OCMS" vertex="1">
          <mxGeometry height="60" width="120" x="820" y="60" as="geometry" />
        </mxCell>
        <mxCell id="plus-receive" parent="plus-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Receive Response" vertex="1">
          <mxGeometry height="60" width="120" x="2500" y="60" as="geometry" />
        </mxCell>
        <mxCell id="plus-end" parent="plus-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" value="End" vertex="1">
          <mxGeometry height="60" width="100" x="2660" y="60" as="geometry" />
        </mxCell>
        <mxCell id="e1" edge="1" parent="plus-sl" source="plus-start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="plus-prepare">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2" edge="1" parent="plus-sl" source="plus-prepare" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="plus-api-call">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2b" edge="1" parent="plus-sl" source="plus-api-call" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="api-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3" edge="1" parent="plus-sl" source="plus-api-call" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="iz-auth">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4" edge="1" parent="plus-sl" source="iz-auth" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="iz-route">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="680" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e-recv" edge="1" parent="plus-sl" source="plus-receive" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="plus-end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ocms-sl" parent="1" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" value="OCMS Backend" vertex="1">
          <mxGeometry height="480" width="2800" x="40" y="420" as="geometry" />
        </mxCell>
        <mxCell id="ocms-auth" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Validate IZ-APIM key" vertex="1">
          <mxGeometry height="60" width="120" x="820" y="60" as="geometry" />
        </mxCell>
        <mxCell id="auth-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="valid ?" vertex="1">
          <mxGeometry height="80" width="80" x="980" y="50" as="geometry" />
        </mxCell>
        <mxCell id="ocms-valid" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Validate Request Schema" vertex="1">
          <mxGeometry height="60" width="120" x="1146" y="60" as="geometry" />
        </mxCell>
        <mxCell id="valid-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="valid ?" vertex="1">
          <mxGeometry height="80" width="80" x="1371" y="50" as="geometry" />
        </mxCell>
        <mxCell id="ocms-batch" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Check Batch Limit" vertex="1">
          <mxGeometry height="60" width="120" x="1535" y="60" as="geometry" />
        </mxCell>
        <mxCell id="batch-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;rounded=0;" value="Max 10 notices per request" vertex="1">
          <mxGeometry height="40" width="170" x="1510" y="160" as="geometry" />
        </mxCell>
        <mxCell id="batch-check" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="OK ?" vertex="1">
          <mxGeometry height="80" width="80" x="1695" y="50" as="geometry" />
        </mxCell>
        <mxCell id="db-merge" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="update Court Case" vertex="1">
          <mxGeometry height="60" width="140" x="2430" y="60" as="geometry" />
        </mxCell>
        <mxCell id="ocms-build" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Build Response" vertex="1">
          <mxGeometry height="60" width="120" x="2500" y="180" as="geometry" />
        </mxCell>
        <mxCell id="ocms-return" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="Return 200 OK" vertex="1">
          <mxGeometry height="60" width="100" x="2600" y="60" as="geometry" />
        </mxCell>
        <mxCell id="err-401" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Unauthorized&lt;br&gt;(OCMS-4001)" vertex="1">
          <mxGeometry height="60" width="140" x="950" y="360" as="geometry" />
        </mxCell>
        <mxCell id="err-400" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Bad Request&lt;br&gt;(OCMS-4000)" vertex="1">
          <mxGeometry height="60" width="140" x="1341" y="360" as="geometry" />
        </mxCell>
        <mxCell id="err-413" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#f8cecc;strokeColor=#b85450;" value="Return Payload Too Large&lt;br&gt;(OCMS-4013)" vertex="1">
          <mxGeometry height="60" width="140" x="1665" y="360" as="geometry" />
        </mxCell>
        <mxCell id="e8" edge="1" parent="ocms-sl" source="ocms-auth" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="auth-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e9" edge="1" parent="ocms-sl" source="auth-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-valid" value="yes">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1100" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e9b" edge="1" parent="ocms-sl" source="auth-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-401" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e12" edge="1" parent="ocms-sl" source="ocms-valid" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="valid-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13" edge="1" parent="ocms-sl" source="valid-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-batch" value="yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13b" edge="1" parent="ocms-sl" source="valid-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-400" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e13c" edge="1" parent="ocms-sl" source="ocms-batch" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="batch-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e14" edge="1" parent="ocms-sl" source="ocms-batch" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="batch-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e15" edge="1" parent="ocms-sl" source="CnwurfEKyOJQQAmyVgED-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="uIbw83WRKTf36Usm0QF--1" value="yes">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1940" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="e15b" edge="1" parent="ocms-sl" source="batch-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="err-413" value="no">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e19" edge="1" parent="ocms-sl" source="db-merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-build">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e20" edge="1" parent="ocms-sl" source="ocms-build" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" target="ocms-return">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="response-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="Response 200 OK:&lt;br&gt;{&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp; &quot;updatedCount&quot;: 1,&lt;/span&gt;&lt;br style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp;&amp;nbsp;&quot;failedCount&quot;: 0,&lt;/span&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&amp;nbsp;&amp;nbsp;&quot;notices&quot;: [{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;noticeNo&quot;: &quot;500400058A&quot;,&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;appCode&quot;: &quot;OCMS-2000&quot;&lt;br&gt;&lt;/font&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;status&quot;: &quot;OK&quot;&lt;div&gt;&amp;nbsp;&amp;nbsp;}]&lt;br&gt;}&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="160" width="200" x="2590" y="290" as="geometry" />
        </mxCell>
        <mxCell id="e20b" edge="1" parent="ocms-sl" source="ocms-return" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" target="response-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uIbw83WRKTf36Usm0QF--2" edge="1" parent="ocms-sl" source="uIbw83WRKTf36Usm0QF--1" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="db-merge">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uIbw83WRKTf36Usm0QF--1" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="update VON and eVON" vertex="1">
          <mxGeometry height="60" width="140" x="2230" y="60" as="geometry" />
        </mxCell>
        <mxCell id="gBrvvMDL-x_8kiUCMAme-2" edge="1" parent="ocms-sl" source="CnwurfEKyOJQQAmyVgED-1" style="edgeStyle=orthogonalEdgeStyle;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;dashPattern=12 12;" target="gBrvvMDL-x_8kiUCMAme-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-1" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" value="check crs_reason_of_suspension" vertex="1">
          <mxGeometry height="60" width="140" x="1850" y="60" as="geometry" />
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-2" edge="1" parent="ocms-sl" source="batch-check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="CnwurfEKyOJQQAmyVgED-1" value="yes">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1815" y="510" as="sourcePoint" />
            <mxPoint x="2100" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-6" edge="1" parent="ocms-sl" source="CnwurfEKyOJQQAmyVgED-3" style="edgeStyle=none;html=1;" target="CnwurfEKyOJQQAmyVgED-5" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-3" parent="ocms-sl" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" value="crs_reason_of_suspension&lt;div&gt;=&lt;/div&gt;&lt;div&gt;null&lt;/div&gt;" vertex="1">
          <mxGeometry height="80" width="80" x="2070" y="50" as="geometry" />
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-4" edge="1" parent="ocms-sl" source="CnwurfEKyOJQQAmyVgED-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="CnwurfEKyOJQQAmyVgED-3" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2030" y="510" as="sourcePoint" />
            <mxPoint x="2270" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-7" edge="1" parent="ocms-sl" source="CnwurfEKyOJQQAmyVgED-5" style="edgeStyle=none;html=1;" target="ocms-build">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CnwurfEKyOJQQAmyVgED-5" parent="ocms-sl" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;" value="retrun OCMS-4003 notice already paid" vertex="1">
          <mxGeometry height="60" width="120" x="2050" y="180" as="geometry" />
        </mxCell>
        <mxCell id="gBrvvMDL-x_8kiUCMAme-1" parent="ocms-sl" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;" value="&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;SELECT notice_no, crs_reason_of_suspension&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&amp;nbsp; FROM ocms_valid_offence_notice&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&amp;nbsp; WHERE notice_no = :noticeNo&lt;/font&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="125" width="210" x="1815" y="180" as="geometry" />
        </mxCell>
        <mxCell id="von-update-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="UPDATE ocms_valid_offence_notice&lt;br&gt;SET payment_acceptance_allowed = :paymentAllowance&lt;br&gt;WHERE notice_no = :noticeNo&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;UPDATE eocms_valid_offence_notice&lt;br&gt;SET payment_acceptance_allowed = :paymentAllowance&lt;br&gt;WHERE notice_no = :noticeNo&lt;/div&gt;" vertex="1">
          <mxGeometry height="135" width="250" x="2175" y="335" as="geometry" />
        </mxCell>
        <mxCell id="von-update-edge" edge="1" parent="ocms-sl" source="uIbw83WRKTf36Usm0QF--1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" target="von-update-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="court-case-detail" parent="ocms-sl" style="text;html=1;whiteSpace=wrap;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=middle;rounded=0;" value="UPDATE ocms_court_case&lt;br&gt;SET court_payment_due_date = :paymentDueDate&lt;br&gt;WHERE notice_no = :noticeNo" vertex="1">
          <mxGeometry height="70" width="250" x="2320" y="250" as="geometry" />
        </mxCell>
        <mxCell id="court-case-edge" edge="1" parent="ocms-sl" source="db-merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" target="court-case-detail">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e7" edge="1" parent="1" source="iz-route" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="ocms-auth">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e21" edge="1" parent="1" source="ocms-return" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;endFill=1;" target="plus-receive">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
