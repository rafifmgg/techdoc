# SUPPRESS Log4j2 internal warnings and status messages
log4j2.statusLoggerLevel=OFF
log4j2.debug=false

# Original logging configuration (kept for reference)
logging.level.root=INFO
logging.level.com.ocmsintranet.apiservice=DEBUG

server.port=8085

api.version=v1

# ============================================
# PAYMENT SYNC FEATURE FLAG
# ============================================
payment.sync.enabled=true

# Intranet datasource
spring.datasource.intranet.url=${SQLCONNSTR_intranetocmsconndb}
spring.datasource.intranet.hikari.connection-timeout=30000
spring.datasource.intranet.hikari.idle-timeout=600000
spring.datasource.intranet.hikari.max-lifetime=1800000
spring.datasource.intranet.hikari.maximum-pool-size=10
spring.datasource.intranet.hikari.minimum-idle=5

# Internet datasource
spring.datasource.internet.url=${SQLCONNSTR_eServiceocmsezconndb}
spring.datasource.internet.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.internet.hikari.connection-timeout=30000
spring.datasource.internet.hikari.idle-timeout=600000
spring.datasource.internet.hikari.max-lifetime=1800000
spring.datasource.internet.hikari.maximum-pool-size=10
spring.datasource.internet.hikari.minimum-idle=5

# PII datasource
# spring.datasource.pii.url=jdbc:sqlserver://localhost:1433;databaseName=piiezdb;encrypt=true;trustServerCertificate=true
spring.datasource.pii.url=${SQLCONNSTR_eServiceocmspiiizezconndb}
spring.datasource.pii.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.pii.hikari.connection-timeout=30000
spring.datasource.pii.hikari.idle-timeout=600000
spring.datasource.pii.hikari.max-lifetime=1800000
spring.datasource.pii.hikari.maximum-pool-size=10
spring.datasource.pii.hikari.minimum-idle=5

# # REPCCS datasource
spring.datasource.repccs.url=${SQLCONNSTR_intranetcascomconndb}
spring.datasource.repccs.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.repccs.hikari.connection-timeout=30000
spring.datasource.repccs.hikari.idle-timeout=600000
spring.datasource.repccs.hikari.max-lifetime=1800000
spring.datasource.repccs.hikari.maximum-pool-size=10
spring.datasource.repccs.hikari.minimum-idle=5

# CAS datasource (Oracle) - for VIP vehicle detection (OCMS 14)
spring.casdb.datasource.url=${CUSTOMCONNSTR_intranetoraocmsconndb}
spring.casdb.datasource.driver-class-name=oracle.jdbc.OracleDriver

# Hikari connection pool settings for CAS Oracle database
spring.casdb.datasource.hikari.pool-name=CasDBHikariCP
spring.casdb.datasource.hikari.maximum-pool-size=10
spring.casdb.datasource.hikari.minimum-idle=0
spring.casdb.datasource.hikari.idle-timeout=30000
spring.casdb.datasource.hikari.connection-timeout=30000
spring.casdb.datasource.hikari.max-lifetime=600000

# Hibernate logging (set to INFO to disable SQL query logs)
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO
# logging.level.oracle.jdbc=INFO
# Use service name from tnsnames.ora (high, medium, or low)
spring.datasource.cas.hikari.connection-timeout=30000
spring.datasource.cas.hikari.idle-timeout=600000
spring.datasource.cas.hikari.max-lifetime=1800000
spring.datasource.cas.hikari.maximum-pool-size=10
spring.datasource.cas.hikari.minimum-idle=5

# Disable Spring Boot's auto-configuration of single datasource
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration

# These can be uncommented in production to use environment variables
# spring.intranetdb.datasource.url=${SQLCONNSTR_intranetocmsconndb}
# spring.internetdb.datasource.url=${SQLCONNSTR_eServiceocmsizezconndb}

# Thread pool configuration for async operations
app.threadpool.size=5

# APIM Configuration
ocms.apim.url=https://ocmsapiprodintapp.azurewebsites.net/ocms

# Hikari connection pool configuration (shared settings)
# These values will be read by the Config classes but can be overridden here
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=12
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.validation-timeout=3000

# Default CORS Configuration (overridden by environment-specific properties)
# These are secure defaults that will be used if environment-specific properties are not set
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Content-Type,Authorization,X-Requested-With,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers
cors.allow-credentials=true
cors.max-age=3600

logging.level.org.apache.catalina.connector.ClientAbortException=OFF

# JPA/Hibernate Settings
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Hibernate Properties for Oracle
# spring.jpa.properties.hibernate.physical_naming_strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
# spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
# spring.jpa.properties.hibernate.connection.autocommit=false
# spring.jpa.properties.hibernate.jdbc.batch_size=25
# spring.jpa.properties.hibernate.order_inserts=true
# spring.jpa.properties.hibernate.order_updates=true
# spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Additional Logging Configuration
logging.level.com.zaxxer.hikari=OFF

# Azure Blob Storage Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

azure.storage.account-endpoint=https://uraproject.blob.core.windows.net/
azure.blob.container-name=offence
azure.blob.temp-folder=temp/offencenoticefiles
azure.blob.notice-attachments-folder=offencenoticefiles
azure.blob.max-file-size-bytes=10485760
azure.blob.toppan.input=ocms/offence/sftp/toppan/input/
azure.blob.toppan.output=ocms/offence/sftp/toppan/output/

# Azure Key Vault Configuration
ocms.azure.keyvault.url=${OCMS_AZURE_KEYVAULT_URL:https://ocms-keyvault.vault.azure.net/}

# Common SFTP Configuration
ura.sftp.ehtnopo.path=/neht/eht/

# Common Email Configuration
email.from.address=DoNotReply@ura.gov.sg
email.from.name=URA OCMS API Service
email.enableSmtp=true
email.admin=admin@ura.gov.sg
ocms.APIM.secretName=Ocp-Apim-Subscription-Key
ocms.APIM.subscriptionKey=Ocp-Apim-Subscription-Key

# Common Email Retry Configuration
email.retry.maxAttempts=3
email.retry.initialDelayMs=2000
email.retry.maxDelayMs=30000

# Common Error Notification Configuration
email.error.notification.enabled=true
email.error.notification.threshold=500

# Change Processing Stage (CPS) Email Notification Configuration
# Recipients for error notifications (MGG, ISG, OCMS users)
# Multiple emails can be comma-separated
email.cps.recipients.mgg=mgg@ura.gov.sg
email.cps.recipients.isg=isg@ura.gov.sg
email.cps.recipients.ocms=ocms-support@ura.gov.sg
email.cps.subject.prefix=OCMS Change Processing Stage Error

# Common Thread Pool Configuration for Async Operations
app.threadpool.size=5

# PII Database Encryption Configuration
SYMMETRIC.KEY.OPEN=OPEN SYMMETRIC KEY ocmspii_symmetric_key DECRYPTION BY CERTIFICATE ocmspii_certificate;
SYMMETRIC.KEY.CLOSE=CLOSE SYMMETRIC KEY ocmspii_symmetric_key;
# ============================================
# CRON SERVICE CONFIGURATION (for SMS)
# ============================================
# Base URL for cron service (used for SMS delegation)
ocms.cron.baseUrl=http://localhost:8083
ocms.cron.sms.enabled=true
